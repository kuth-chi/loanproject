{% extends 'base/base.html' %}
{% load static %}
{% load i18n %}
{% block javascript %}
  <script>
  var loadFile = function(event) {
    var output = document.getElementById('output');
    output.src = URL.createObjectURL(event.target.files[0]);
    output.onload = function() {
      URL.revokeObjectURL(output.src) // free memory
    }
  };
  var loadFile2 = function(event) {
    var output = document.getElementById('output2');
    output.src = URL.createObjectURL(event.target.files[0]);
    output.onload = function() {
      URL.revokeObjectURL(output.src) // free memory
    }
  };

</script>
{% endblock %}

{% block content %}

    {% include 'base/navbar.html' %}
    <div class="container-lg">
    <div class="col-12 p-3 bg-light-subtle shadow my-2 d-none-print">
        <div class="d-flex justify-content-between text-success-emphasis">
            <a href="{% url 'customer-detail' customerDetail.id %}" class="btn "> <i class="ti-arrow-left mx-2"></i>{% translate "Customer detail" %}</a>
            <div class="">
                <a class="text-decoration-none text-dark" href="{% url 'customer' %}"><i class="ti-home"></i></a> /
                {{ idcardDetail.card_type|title }}
            </div>
        </div>
    </div>
{#    ================== delete modal ==============#}
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">{% translate 'Delete customer ' %}{{ customerDetail.name }} | {{ customerDetail.name_kh }}</h1>
        </div>
          <form action="{% url 'delete_id_card' idcardDetail.id %}" method="POST">
              {%  csrf_token %}
            <div class="modal-body">
              <p>{% translate 'Are you sure want to delete' %} {{ idcardDetail.card_type }} ?"| {{ idcardDetail.customer.name }}?</p>
            </div>
            <div class="modal-footer">
              <a class="btn btn-warning" data-bs-dismiss="modal" href="{% url 'customer' %}">{% translate 'Cancel' %}</a>
              <button class="btn btn-danger" type="submit" name="Confirm">{% translate 'Delete' %}</button>
            </div>
          </form>
      </div>
    </div>
  </div>
{#    ==================== end modal ====================#}
        <div class="row justify-content-center">
            <div class="col-sm-12 col-md-8 col-lg-8 text-center">
                <div class="">
                    <div class="text-end">
                        <div class="dropdown d-none-print">
                            <button class="btn btn-sm" data-bs-toggle="dropdown"><i class="ti-menu"></i></button>
                            <ul class="dropdown-menu">
                                <li><a href="{% url 'update_id_card' customerDetail.id %}" class="dropdown-item"><i class="ti-pencil text-success"></i> Update</a></li>
                                <li><a href="" class="dropdown-item btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal" ><i class="ti-trash text-danger"></i> Delete</a></li>
                                <li><a href="" onclick="window.print()" class="dropdown-item"><i class="ti-printer"></i> Print</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-title d-none-print"><h3>{{ idcardDetail.card_type|upper }} ( {{ idcardDetail.customer.name|upper }} | {{ idcardDetail.customer.name_kh|upper }})</h3></div>
                    <div class="">
                        {% for i in id_cardImage %}
                            <a href="/media/{{ i.image_url }}" data-lightbox="gallery-images">
                         <img src="/media/{{ i.image_url }}" alt="" style="width: 100%; max-width: 300px; max-height: 350px; height: 100%;">
                      </a>

                        {% endfor %}
                    </div>
                    <div class="mt-3">
                        <p>Id card number : <strong>{{  idcardDetail.card_number }}</strong></p>
                        <p>Date of birth : <strong>{{  idcardDetail.customer.birthdate }}</strong></p>
                        <p>Expired : <strong>{{  idcardDetail.card_deadline }}</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
