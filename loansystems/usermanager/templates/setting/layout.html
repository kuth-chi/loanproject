{% extends 'base/base.html' %}
{% load static %}
{% load i18n %}
{% block title %} {% translate "Layout" %}{% endblock %}

{% block content %}
    {% include 'base/navbar.html' %}
    {% include 'base/sidebar.html' %}
    {% block javascript %}

    <script>
     var jan = '{% translate 'Jan' %}';
     var January = '{% translate 'Jan' %}';
     var feb = '{% translate 'Feb' %}';
     var February = '{% translate 'Feb' %}';
     var mar = '{% translate 'Mar' %}';
     var March = '{% translate 'Mar' %}';
     var apr = '{% translate 'Apr' %}';
     var April = '{% translate 'Apr' %}';
     var may = '{% translate 'May' %}';
     var May = '{% translate 'May' %}';
     var jun = '{% translate 'Jun' %}';
     var June = '{% translate 'Jun' %}';
     var jul = '{% translate 'Jul' %}';
     var July = '{% translate 'Jul' %}';
     var aug = '{% translate 'Aug' %}';
     var August = '{% translate 'Aug' %}';
     var sep = '{% translate 'Sep' %}';
     var September = '{% translate 'Sep' %}';
     var oct = '{% translate 'Oct' %}';
     var October = '{% translate 'Oct' %}';
     var nov = '{% translate 'Nov' %}';
     var November = '{% translate 'Nov' %}';
     var dec = '{% translate 'Dec' %}';
     var December = '{% translate 'Dec' %}';

    var config = {
        type: 'bar',
        {% if choose_month == 'Month' %}
            data: {
            labels: [
                {% for months in month_name %}
                "{{months.name}}",
                {% endfor %}
            ]
            ,
            datasets: [{
                label: {% translate '`Interest`' %},
                data: [
                    {% for this_month in total_current_month_interest %}
                    {{this_month.total_current_day_interest}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Principle`' %},
                data: [
                    {% for this_month in total_current_month_principle %}
                    {{this_month.total_current_day_principle}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Paid`' %},
                data:[
                    {% for this_month in total_current_month_paid %}
                        {{this_month.total_current_day_paid}},
                    {% endfor %}
                ],
                backgroundColor:

                    'rgba(153, 102, 255, 0.2)',
                borderColor:

                    'rgba(153, 102, 255, 1)',

                borderWidth: 1
            }
            ]
        },
        {% elif choose_month == 'Last Month' %}
              data: {
            labels: [
                {% for months in month_name %}
                "{{months.name}}",
                {% endfor %}
            ]
            ,
            datasets: [{
                label: {% translate '`Interest`' %},
                data: [
                    {% for this_month in total_current_month_interest %}
                    {{this_month.total_current_day_interest}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Principle`' %},
                data: [
                    {% for this_month in total_current_month_principle %}
                    {{this_month.total_current_day_principle}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Paid`' %},
                data:[
                    {% for this_month in total_current_month_paid %}
                        {{this_month.total_current_day_paid}},
                    {% endfor %}
                ],
                backgroundColor:

                    'rgba(153, 102, 255, 0.2)',
                borderColor:

                    'rgba(153, 102, 255, 1)',

                borderWidth: 1
            }
            ]
        },
        {% elif choose_month == 'This Year' %}
            data: {
            labels: [
                {% for months in month_name %}
                "{{months.name}}",
                {% endfor %}
            ]
            ,
            datasets: [{
                label: {% translate '`Interest`' %},
                data: [
                    {% for this_year in total_current_month_interest %}
                    {{this_year.total_current_year_interest}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Principle`' %},
                data: [
                    {% for this_year in total_current_month_principle %}
                    {{this_year.total_current_year_principle}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Paid`' %},
                data:[
                    {% for this_year in total_current_month_paid %}
                        {{this_year.total_current_year_paid}},
                    {% endfor %}
                ],
                backgroundColor:

                    'rgba(153, 102, 255, 0.2)',
                borderColor:

                    'rgba(153, 102, 255, 1)',

                borderWidth: 1
            }
            ]
        },
            {% elif choose_month == 'Last Year' %}
            data: {
            labels: [
                {% for months in month_name %}
                "{{months.name}}",
                {% endfor %}
            ]
            ,
            datasets: [{
                label: {% translate '`Interest`' %},
                data: [
                    {% for this_year in total_current_month_interest %}
                    {{this_year.total_current_year_interest}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Principle`' %},
                data: [
                    {% for this_year in total_current_month_principle %}
                    {{this_year.total_current_year_principle}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Paid`' %},
                data:[
                    {% for this_year in total_current_month_paid %}
                        {{this_year.total_current_year_paid}},
                    {% endfor %}
                ],
                backgroundColor:

                    'rgba(153, 102, 255, 0.2)',
                borderColor:

                    'rgba(153, 102, 255, 1)',

                borderWidth: 1
            }
            ]
        },
        {% else %}
            data: {
            labels: [
                {% for months in month_name %}
                "{{months.name}}",
                {% endfor %}
            ]
            ,
            datasets: [{
                label: {% translate '`Interest`' %},
                data: [
                    {% for this_year in total_current_month_interest %}
                    {{ this_year.total_current_year_interest }},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Principle`' %},
                data: [
                    {% for this_year in total_current_month_principle %}
                    {{this_year.total_current_year_principle}},
                    {% endfor %}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: {% translate '`Paid`' %},
                data:[
                    {% for this_year in total_current_month_paid %}
                        {{this_year.total_current_year_paid}},
                    {% endfor %}
                ],
                backgroundColor:

                    'rgba(153, 102, 255, 0.2)',
                borderColor:

                    'rgba(153, 102, 255, 1)',

                borderWidth: 1
            }
            ]
        },
    {% endif %}
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
    }
     window.onload = function() {
      var ctx = document.getElementById('dashChart').getContext('2d');
      window.myPie = new Chart(ctx, config);

       var chart1 = document.getElementById('pie-chart').getContext('2d');
      window.myBar = new Chart(chart1, configs);
    };

 $(function() {
    var start = moment().subtract(29, 'days');
    var end = moment();

    function cb(start, end) {
        $('#reportrange input').html(start.format('YYYY-MM-DD') + ',' + end.format('YYYY-MM-DD'));
    }

    $('input[name="timestamp"]').daterangepicker({
        startDate: start,
        endDate: end,
        ranges: {
           'Today': [moment(), moment()],
           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
           'This Month': [moment().startOf('month'), moment().endOf('month')],
           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        },
        locale: {
            format: 'YYYY-MM-DD',
            separator: ','
        },

    }, cb);

    cb(start, end);

});
function submitForm() {
    document.getElementById('dash_chart_frm').submit();
}
document.getElementById("dashChart").addEventListener("change", function() {
    var selectedOption = this.options[this.selectedIndex].value;
    var element = document.getElementById(selectedOption);
    var topOffset = element.offsetTop;
    window.scrollTo(0, topOffset);
  });
    </script>
    {% endblock %}
    <div class="container-lg container-fluid vh-100">
        <div class="col-12 p-3 bg-light-subtle shadow my-4">
            <div class="d-flex justify-content-between text-success-emphasis flex-wrap">
                <h4>{% translate "Layout Setting" %}</h4>
                <div class="">
                    <a class="text-decoration-none text-dark" href="{% url 'dashboard' %}"><i class="ti-home"></i></a> /
                    Layout
                </div>
            </div>
        </div>

       <div class="d-flex flex-column">
           <form action="" method="post">
               {% csrf_token %}
               <h6>Setting Layout</h6>
               <div class="d-flex">
                   <label class="form-check-label mx-2" for="sidebar"><i class="ti-layout-sidebar-left"></i> IS SIDEBAR</label>
                   <input class="form-check" type="checkbox" id="sidebar" name="is_sidebar" {% if user_setting.is_sidebar  %} checked {% endif %}>
               </div>
               <button type="submit" class="btn btn-sm btn-success">Save </button>
           </form>
       </div>
    </div>

<div class="mt-4">
{% include 'base/footer.html' %}
</div>
{% endblock %}

